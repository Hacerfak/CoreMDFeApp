<UserControl xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="clr-namespace:CoreMDFe.Desktop.ViewModels"
    xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
    xmlns:conv="clr-namespace:CoreMDFe.Desktop.Converters"
    x:Class="CoreMDFe.Desktop.Views.HistoricoView"
    x:DataType="vm:HistoricoViewModel">

    <UserControl.Resources>
        <conv:StatusToBrushConverter x:Key="StatusToBrushConverter" />
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Border Padding="40">
            <StackPanel Spacing="20">

                <Grid ColumnDefinitions="*, Auto">
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Histórico de MDF-e" FontSize="28" FontWeight="Light"
                            Foreground="#222222" />
                        <TextBlock
                            Text="Gerencie os manifestos emitidos e realize eventos de encerramento."
                            FontSize="14" Foreground="Gray" Margin="0,5,0,0" />
                    </StackPanel>
                    <Button Grid.Column="1" Command="{Binding CarregarHistoricoCommand}"
                        Classes="Outline" VerticalAlignment="Center" Padding="10">
                        <materialIcons:MaterialIcon Kind="Refresh" Width="24" Height="24"
                            Foreground="#673AB7" />
                    </Button>
                </Grid>

                <Border Background="#FFEBEE" Padding="15" CornerRadius="8"
                    IsVisible="{Binding HasErro}">
                    <TextBlock Text="{Binding MensagemErro}" Foreground="#D32F2F"
                        FontWeight="SemiBold" TextWrapping="Wrap" />
                </Border>

                <Border Background="White" CornerRadius="8" BoxShadow="0 2 10 0 #0A000000"
                    Padding="0">
                    <StackPanel>
                        <Border Background="#F8F9FA" Padding="20,15" BorderBrush="#EEEEEE"
                            BorderThickness="0,0,0,1">
                            <Grid ColumnDefinitions="80, 120, *, 120, 150">
                                <TextBlock Grid.Column="0" Text="NÚMERO" FontWeight="SemiBold"
                                    FontSize="12" Foreground="Gray" />
                                <TextBlock Grid.Column="1" Text="DATA" FontWeight="SemiBold"
                                    FontSize="12" Foreground="Gray" />
                                <TextBlock Grid.Column="2" Text="CHAVE DE ACESSO"
                                    FontWeight="SemiBold" FontSize="12" Foreground="Gray" />
                                <TextBlock Grid.Column="3" Text="ROTA" FontWeight="SemiBold"
                                    FontSize="12" Foreground="Gray" />
                                <TextBlock Grid.Column="4" Text="STATUS" FontWeight="SemiBold"
                                    FontSize="12" Foreground="Gray" HorizontalAlignment="Center" />
                            </Grid>
                        </Border>

                        <ItemsControl ItemsSource="{Binding Manifestos}" x:CompileBindings="False">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="#EEEEEE" BorderThickness="0,0,0,1"
                                        Padding="20,15">
                                        <Grid ColumnDefinitions="80, 120, *, 120, 150">
                                            <TextBlock Grid.Column="0" Text="{Binding Numero}"
                                                VerticalAlignment="Center" FontWeight="Bold" />
                                            <TextBlock Grid.Column="1"
                                                Text="{Binding DataEmissao, StringFormat={}{0:dd/MM/yyyy}}"
                                                VerticalAlignment="Center" Foreground="#555" />
                                            <TextBlock Grid.Column="2" Text="{Binding ChaveAcesso}"
                                                VerticalAlignment="Center" FontSize="11"
                                                Foreground="Gray" TextTrimming="CharacterEllipsis"
                                                ToolTip.Tip="{Binding ChaveAcesso}" />

                                            <StackPanel Grid.Column="3" Orientation="Horizontal"
                                                Spacing="5" VerticalAlignment="Center">
                                                <TextBlock Text="{Binding UfOrigem}"
                                                    FontWeight="SemiBold" />
                                                <materialIcons:MaterialIcon Kind="ArrowRight"
                                                    Width="14" />
                                                <TextBlock Text="{Binding UfDestino}"
                                                    FontWeight="SemiBold" />
                                            </StackPanel>

                                            <Border Grid.Column="4" Padding="10,4" CornerRadius="12"
                                                HorizontalAlignment="Center"
                                                Background="{Binding Status, Converter={StaticResource StatusToBrushConverter}}">
                                                <TextBlock Text="{Binding Status}" FontSize="11"
                                                    FontWeight="SemiBold" Foreground="White" />
                                            </Border>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <TextBlock Text="Nenhum manifesto encontrado."
                            IsVisible="{Binding IsListaVazia}" HorizontalAlignment="Center"
                            Margin="0,40" Foreground="Gray" />
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
    </ScrollViewer>
</UserControl>